CMAKE_MINIMUM_REQUIRED(VERSION 2.6)

SET(CMAKE_MODULE_PATH "${CMAKE_SOURCE_DIR}/CMakeModules/")
INCLUDE_DIRECTORIES("${CMAKE_SOURCE_DIR}/include")

SET(EXECUTABLE_OUTPUT_PATH "${CMAKE_BINARY_DIR}/bin")
SET(LIBRARY_OUTPUT_PATH "${CMAKE_BINARY_DIR}/lib")

FIND_PACKAGE(DL)

IF(UNIX)
	SET(AUX_INCLUDES "")
	SET(AUX_LIBRARIES "${DL_LIBRARY}" "m" "rt")
ELSE(UNIX)
	SET(AUX_INCLUDES "")
	SET(AUX_LIBRARIES "")
ENDIF(UNIX)

MACRO(SHARED_STATIC name dir ext)
    PROJECT(${name})

    FILE(GLOB_RECURSE ${name}_SOURCES ${dir}/*.${ext})
    ADD_LIBRARY(${name} SHARED ${${name}_SOURCES})
    ADD_LIBRARY(${name}.static STATIC ${${name}_SOURCES})

    INSTALL(TARGETS ${name} DESTINATION lib)
    INSTALL(TARGETS ${name}.static DESTINATION lib)
ENDMACRO(SHARED_STATIC)

OPTION(BUILD_MONOLITHIC "Build the monolithic SIEGE build" ON)
OPTION(BUILD_SPLIT "Build the separated SIEGE build" OFF)

ADD_SUBDIRECTORY(siege)
ADD_SUBDIRECTORY(examples)
ADD_SUBDIRECTORY(bindings)
ADD_SUBDIRECTORY(modules)
